import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

const firebaseConfig = { /* 기존 설정 유지 */ };

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const settingsRef = ref(db, "settings");

document.getElementById("saveSettings").addEventListener("click", () => {
    const days = [];
    document.querySelectorAll(".day-row").forEach((row, index) => {
        days.push({
            date: document.getElementById(`date-${index}`).value,
            name: document.getElementById(`name-${index}`).value,
            start: document.getElementById(`start-${index}`).value,
            end: document.getElementById(`end-${index}`).value,
        });
    });

    const settings = {
        week: document.getElementById("weekNumber").value,
        allowedDate: document.getElementById("allowedDate").value,
        days
    };

    set(settingsRef, settings).then(() => alert("설정이 저장되었습니다."));
});

function loadSettings() {
    get(settingsRef).then((snapshot) => {
        if (snapshot.exists()) {
            // 불러오기 로직
        }
    });
}
loadSettings();
